@model ReportingAssistant.Models.TasksDone

@{
    ViewBag.Title = "Issues";
}
@*<script src="~/Scripts/DataTables/dataTables.bootstrap4.min.js"></script>
<link href="~/Content/DataTables/css/dataTables.bootstrap4.css" rel="stylesheet" />*@
<style>
    .collapsible {
        background-color: #dcedf2;
        cursor: pointer;
        padding: 18px;
        width: 100%;
        border: none;
        text-align: left;
        outline: none;
        font-size: 15px;
    }

        .active, .collapsible:hover {
            background-color: #8ddcf2;
        }

    .content {
        padding: 0 18px;
        display: none;
        overflow: hidden;
        background-color: #f1f1f1;
    }
</style>
<h2>Issues</h2>
<script src="~/JS/DeleteScript.js"></script>
@*@using (Html.BeginForm("Insertd_data", "MyIssues", FormMethod.Post, new { enctype = "multipart/form-data" }))
{*@
    @if (Model.tlist.Count > 0)
    {
        foreach (var task in Model.tlist)
        {
            <button type="button" class="collapsible mt-2">@task.DateOfTask.DayOfWeek, @task.DateOfTask.ToString("dd/MMM/yyyy")</button>
            <div class="content mt-2">
                <button type="button" class="collapsible">Tasks Assigned</button>
                <div class="content mt-2">
                    @if (Model.tlist.Count != 0)
                    {
                        foreach (var i in Model.tlist)
                        {

                            <!--<div class="col-lg-4 col-md-4 col-sm-4 bootstrap-touchspin-down bootstrap-select">
                <button type="button" class="collapsible ">@(i.AdminName == null ? "" : i.AdminName)</button>
                <div class="content advance-table-row table-bordered" style="border-color:blue">-->
                            @*<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>*@
                            <!--<fieldset>
                        <legend>@(i.Screen == null ? "" : i.Screen)</legend>
                        <h3>@(i.Description == null ? "" : i.Description)</h3>
                    </fieldset>
                </div>
            </div>-->
                            <div class="col-lg-12">
                                <ul class="nav nav-tabs" id="adminTabs" role="tablist">
                                    <li class="nav-item">
                                        <a class="nav-link active bg-light" id="tab-@i.AdminName" data-toggle="tab" href="#taskContent" role="tab" onclick="toggleCard()">
                                            @(i.AdminName ?? "No Admin Name")
                                        </a>
                                    </li>
                                </ul>

                                <div class="tab-content" id="adminTabsContent">
                                    <div class="tab-pane fade show" id="taskContent" role="tabpanel" style="display: block;">
                                        <div class="card border-primary mt-3">
                                            <div class="card-header">
                                                @(i.Screen ?? "No Screen Info")
                                            </div>
                                            <div class="card-body">
                                                <h5 class="card-title">@(!string.IsNullOrEmpty(i.UserName) ? i.UserName : "No Admin Name")</h5>
                                                <p class="card-text">@(!string.IsNullOrEmpty(i.Description) ? i.Description : "No Description Available")</p>
                                            </div>
                                            <div class="card-footer">
                                                <button class="btn btn-sm btn-success" onclick="fxsave_tskdn_data(@i.ProjectID,'@i.Description','@i.Screen', '@i.Attachment', @i.TaskID, '@i.AdminUserID')">Task Done</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    }
                    else if (Model.tlist.Count == 0)
                    {
                        <p style="color:red">No Task Assigned</p>
                    }
                    else
                    {
                        <p style="color:red">No Task Assigned</p>
                    }

                </div>

                <button type="button" class="collapsible mt-2">Task Done</button>
                <div class="col-lg-12 col-md-12 col-sm-12 bootstrap-touchspin-down">
                    @if (Model.tdlist.Count != 0)
                    {
                        foreach (var i in Model.tdlist)
                        {

                            @*<div class="container-fluid advance-table-row table-bordered bootstrap-touchspin-up" style="border-color:green">
                    <fieldset>
                        <legend>@(i.Screen == null ? "" : i.Screen)</legend>
                        <h3>@(i.Description == null ? "" : i.Description)</h3>
                    </fieldset>
                </div>*@
                            <div class="card border-success mt-2">
                                <div class="card-header bg-success text-white">
                                    @(i.Screen ?? "No Screen Info")
                                </div>
                                <div class="card-body">
                                    <h5 class="card-title">Task completed on @i.DateOfTaskDone.ToString("dd/MMM/yyyy")</h5>
                                    <p class="card-text">@(!string.IsNullOrEmpty(i.Description) ? i.Description : "No Description Available")</p>
                                </div>
                            </div>
                        }
                    }
                    else if (Model.tdlist.Count == 0)
                    {
                        <p style="color:red">No Task Done</p>
                    }

                    else
                    {
                        <p style="color:red">No Task Done</p>
                    }

                    @*<lebel style="color:red">New Task Done</lebel>*@

                    @*<div class="container-fluid advance-table-row table-bordered bootstrap-touchspin-up" style="border-color:green" id="tddata_div">qua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>*@
                    @*<fieldset>
        <legend class="col-lg-6 col-md-6 col-sm-6 bootstrap-touchspin-down">Project Name @Html.DropDownListFor(m => m.ProjectId, new SelectList(ViewBag.pr_data, "Value", "Text"), "---select---", new { @class = "form-control" })*@
                    @*@Html.TextAreaFor(m => m.Description, new { @class = "form-control", placeholder = "Description"})
        @Html.TextBoxFor(m => m.Screen, new { @class = "form-control", placeholder = "Screen Name" })*@
                    @*<button class="btn btn-success" type="submit" id="submit">Submit </button>
                </legend>
            </fieldset>
        </div>*@
                </div>

                <button type="button" class="collapsible mb-2 mt-2">Final Comment</button>
                <div class="content mt-2">
                    @if (Model.fclist.Count != 0)
                    {
                        @*<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>*@
                        foreach (var i in Model.fclist)
                        {

                            <div class="col-lg-4 col-md-4 col-sm-4 bootstrap-touchspin-down bootstrap-select">
                                <button type="button" class="collapsible ">@(i.AdminUserID == null ? "" : i.AdminUserID)</button>
                                <div class="content advance-table-row table-bordered" style="border-color:blue">
                                    @*<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>*@
                                    <fieldset>
                                        <legend>@(i.Screen == null ? "" : i.Screen)</legend>
                                        <h3>@(i.Description == null ? "" : i.Description)</h3>
                                    </fieldset>
                                </div>
                            </div>
                        }
                    }
                    else if (Model.fclist.Count == 0)
                    {
                        <p style="color:red">No Final Comment Found</p>
                    }
                    else
                    {
                        <p style="color:red">No Final Comment Found</p>
                    }
                </div>
            </div>
        }
    }
    else
    {
        <h3 class="text-center text-info">No Tasks are assigned</h3>
    }
@*}*@

@Html.ValidationSummary()
@Html.Raw(TempData["Message"])
<script>
    var coll = document.getElementsByClassName("collapsible");
    var i;

    for (i = 0; i < coll.length; i++) {
        coll[i].addEventListener("click", function () {
            this.classList.toggle("active");
            var content = this.nextElementSibling;
            if (content.style.display === "block") {
                content.style.display = "none";
            } else {
                content.style.display = "block";
            }
        });
    }
    function toggleCard() {
        var card = document.getElementById("taskContent");
        if (card.style.display === "none" || card.style.display === "") {
            card.style.display = "block";
        } else {
            card.style.display = "none";
        }
    }
    var TaskDoneUrl = '@Url.Action("Insertd_data", "MyIssues")';
</script>

